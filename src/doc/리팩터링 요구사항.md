# 리팩터링 요구사항

서비스의 로직을 도메인으로 내리기 위하여 아래와 같이 도메인 객체들에게 책임을 나눈다.

- [ ] `질문`에게 삭제 상태가 되도록 요청할 수 있다.
  - [ ] 단, 로그인 한 사용자와 질문한 사람이 다를 경우 삭제를 거부한다.
  - [ ] 삭제된 질문은 자신에게 달린 `답변`에게 삭제를 요청한다.
    - [ ] 단, 답변이 달려 있을 경우 질문자와 답변자들의 모두 같은 경우에만 삭제가 가능하다.
  - [ ] 질문과 답변 삭제 이력에 대한 정보를 남긴다.

## 클래스별 단위 책임 분석

### Question
- [x] 삭제를 요청하면 -> 자신을 삭제 상태로 만든다.
- [x] 삭제를 요청하면 -> 자기 자신과 삭제 상태로 바뀐 답변들의 정보를 준다.
- [x] 질문하지 않은 사용자가 삭제를 요청하면 -> `CannotDeleteException("질문을 삭제할 권한이 없습니다.")`을 던진다.
- [x] 질문자와 다른 사람이 쓴 답변이 달려있는 질문에게 삭제를 요청하면 -> `CannotDeleteException("다른 사람이 쓴 답변이 있어 삭제할 수 없습니다.")`를 던진다.

### Answer
- [x] 주어진 사용자와 답변자가 다를 경우에 삭제를 요청하면 -> `CannotDeleteException("답변을 삭제할 권한이 없습니다.")`를 던진다.
- [x] 주어진 사용자와 답변자가 같을 때 삭제를 요청하면 -> 자신을 삭제 상태로 만든다.
- [x] 삭제를 요청하면 -> 자기 자신의 삭제 정보를 준다.